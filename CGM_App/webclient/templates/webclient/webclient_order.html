{% extends "webclient/webclient_base.html" %}

{% load static %}

{% block header %}
	<meta charset="UTF-8">
	<title>CGMApp - Order</title>

	<link rel="stylesheet" type="text/css" href="{% static 'webclient/css/order.css' %}">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}

{% block content %}
	<div id="app" class="container">
		<div class="shadow p-3 card mb-5 mt-3">
			<div class="card-body">
				<div class="row mt-4 mb-4">
					<h1 class="col-md-6">Order Barang</h1>
					<button id="add-new-button" class="col-md-3 btn btn-primary btn-sm" v-on:click="addNewOrderField">Tambah Order</button>
				</div>

				<!-- TABLE -->
				<div class="table-responsive">
					<table id="table-ongoing-orders" class="table table-striped table-bordered" style="width:100%">
						<thead>
							<tr>
								<th>Order ID</th>
								<th>Tanggal Order</th>
								<th>Parts</th>
								<th>Note</th>
								<th>Tanggal Datang</th>
							</tr>
						</thead>
						<tbody>
							<tr v-for="item in ongoingOrders" v-bind:key="item.id" v-bind:id="item.id">
								<template v-if="Object.keys(item).length > 0">
									<td>[[ item.id ]]</td> 
									<td>[[ item.tanggal_order ]]</td> 
									<td>[[ item.nama_barang ]]</td>
									<td>[[ item.note ]]</td>
									<td>[[ item.tanggal_datang ]]</td>
								</template>

								<!-- <template v-else>
									<td><input type="text" class="form-control" readonly value="-"></td>
									<td><input name="tanggal_order" type="datetime-local" class="form-control"></td>
									<td><input name="nama_barang" type="text" class="form-control"></td>
									<td><input name="note" type="text" class="form-control"></td>
									<td><input name="tanggal_datang" type="text" class="form-control"></td>

									<td><button class="btn btn-danger" onclick="app.onClickRemoveButton(this)"><i class="fa fa-trash"></i></button></td>
									<td><button class="btn btn-primary" onclick="app.onClickSaveButton(this)"><i class="fa fa-floppy-o"></i></button></td>
								</template> -->
							</tr>
						</tbody>
						<tfoot>
							<tr>
								<th>Order ID</th>
								<th>Tanggal Order</th>
								<th>Parts</th>
								<th>Note</th>
								<th>Tanggal Datang</th>
							</tr>
						</tfoot>
					</table>
				</div>
				<!-- TABLE END -->
			</div>
		</div>
	</div>
{% endblock %}

{% block scripts %}
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
	{{ data|json_script:"initialData" }}
	<script>
		var initialData = JSON.parse(document.getElementById('initialData').textContent);
		console.log(initialData);
		for (orderData of initialData) {
			orderData.tanggal_order = moment(orderData.tanggal_order).format('DD-MM-YYYY HH:mm');
			console.log(orderData.tanggal_order);
		}
	</script>
	<script src="{% static 'webclient/js/order_app.js' %}" type="text/javascript"></script>
	<script src="{% static 'webclient/js/order_datatables.js' %}" type="text/javascript"></script>
	<script src="{% static 'webclient/js/jquery.mobile-events.min.js' %}" type="text/javascript"></script>
{% endblock %}
